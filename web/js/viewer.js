!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";t.__esModule=!0;var n,r=o(1),l={currentFontSize:18,columnWidth:0,totalColumns:0,scrollFix:0,currentPage:"",pagesPerColumn:[],readMode:!0,animateEnabled:!0,invertViewerColor:!1,sepiaViewerColor:!1,lineHeight:1.5},d=!1,u=function(){l=r.default(l,!0)},a=function(e){if(l.animateEnabled){var t=l.columnWidth;l.readMode||(t*=.75);var o=Math.round((document.body.scrollLeft-l.scrollFix)/t);o<l.pagesPerColumn.length&&(l.currentPage=l.pagesPerColumn[o]),n&&(n.innerText=l.currentPage)}else e.preventDefault()};window.addEventListener("touchmove",(function(e){(!l.animateEnabled||e.targetTouches.length>1)&&(e.preventDefault(),e.stopImmediatePropagation())}),{passive:!1}),window.addEventListener("touchstart",(function(e){e.targetTouches.length>1&&(e.preventDefault(),e.stopImmediatePropagation())}),{passive:!1});window.addEventListener("load",(function(){n=document.getElementById("pageNumber"),document.documentElement.style.setProperty("--fontSize",l.currentFontSize+"px");var e=document.body.querySelector("body > .zoomPanel"),t=document.body.querySelector("body > .buttons"),o=document.body.querySelector("body > .buttons > .fullScreenModeButton"),i=document.body.querySelector("body > .buttons > .increaseFontButton"),c=document.body.querySelector("body > .buttons > .decreaseFontButton"),s=document.body.querySelector("body > .buttons > .increaseLineHeight"),m=document.body.querySelector("body > .buttons > .decreaseLineHeight"),p=document.body.querySelector("body > .buttons > .nightModeButton"),y=document.body.querySelector("body > .buttons > .sepiaModeButton"),f=function(){document.documentElement.style.setProperty("--fontSize",l.currentFontSize+"px"),document.documentElement.style.setProperty("--lineHeight",l.lineHeight+"em"),l=r.default(l,!0)};null==o||o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()})),null==p||p.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),d||(l.invertViewerColor=!l.invertViewerColor,document.documentElement.style.setProperty("--invertViewerColor",""+(l.invertViewerColor?1:0)))})),null==y||y.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),d||(l.sepiaViewerColor=!l.sepiaViewerColor,document.documentElement.style.setProperty("--sepiaViewerColor",""+(l.sepiaViewerColor?1:0)),document.documentElement.style.setProperty("--contrastViewerColor",""+(l.sepiaViewerColor?.6:1)))})),null==i||i.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.currentFontSize<50&&(l.currentFontSize+=2,f())})),null==c||c.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.currentFontSize>8&&(l.currentFontSize-=2,f())})),null==s||s.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.lineHeight<2&&(l.lineHeight+=.1,f())})),null==m||m.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.lineHeight>1&&(l.lineHeight-=.1,f())})),document.body.addEventListener("click",(function(o){if(o.preventDefault(),l.animateEnabled&&(l.readMode=!l.readMode,e&&t)){if(l.animateEnabled=!1,document.documentElement.style.setProperty("--viewerSnapType","none"),l.readMode){var n=-1*document.body.scrollLeft/3;l.scrollFix=n,document.documentElement.style.setProperty("--horizontalScrollFix",l.scrollFix+"px")}else{n=.25*document.body.scrollLeft;l.scrollFix=n,document.documentElement.style.setProperty("--horizontalScrollFix",l.scrollFix+"px")}d=!0,e.className="zoomPanel"+(l.readMode?" zoom":""),t.className="buttons"+(l.readMode?" zoom":"")}})),document.body.addEventListener("scroll",a),document.fonts&&document.fonts.ready&&document.fonts.ready.then((function(){u()})),document.body.querySelectorAll("body > .buttons > .selectTypography").forEach((function(e){null==e||e.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),document.body.className="viewer epub "+e.value,f()}))})),["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"].forEach((function(t){e.addEventListener(t,(function(){if(d){d=!1;var e=document.body.scrollLeft-l.scrollFix;document.body.scrollTo(e,0),l.scrollFix=0,document.documentElement.style.setProperty("--animationSpeed","0s"),document.documentElement.style.setProperty("--horizontalScrollFix",l.scrollFix+"px"),l=r.default(l,!1),setTimeout((function(){document.documentElement.style.setProperty("--animationSpeed","0.5s"),l.animateEnabled=!0,document.documentElement.style.setProperty("--viewerSnapType","x mandatory"),document.body.scrollTo(e,0)}),0)}}),!1)}))})),window.addEventListener("resize",u)},function(e,t,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.__esModule=!0;t.default=function(e,t){var o;void 0===t&&(t=!1);var r=e.currentFontSize,l=n({},e),d=document.body.querySelector("body > .zoomPanel > .labelsForEveryPage"),u=document.body.querySelector("body > .pageSnaps");document.body.querySelectorAll("body > .zoomPanel >.labelsForEveryPage > .label").forEach((function(e){e.remove()})),document.body.querySelectorAll("body > .pageSnaps > .scrollSnap").forEach((function(e){e.remove()}));var a=window.innerWidth,i=window.innerHeight;document.documentElement.style.setProperty("--totalChapterWidth","0"),document.documentElement.style.setProperty("--vh",i+"px"),document.documentElement.style.setProperty("--windowWidth","0px"),document.documentElement.style.setProperty("--totalColumnWidth","0");var c=((null===(o=document.getElementById("totalColumnWidthCalculator"))||void 0===o?void 0:o.clientWidth)||1)+2*r,s=Math.floor(a/c),m=a/s,p=document.body.scrollWidth*(e.readMode?1:1/.75),y=Math.round(p/m);document.documentElement.style.setProperty("--totalColumnWidth",m+"px");var f=m*y,b=document.body;document.documentElement.style.setProperty("--totalChapterWidth",f+"px");var v=[],g=[],h=document.body.scrollLeft;document.body.querySelectorAll("body > .zoomPanel > .chapterWrapper [data-page]").forEach((function(t){var o=t,n=o.getClientRects()[0].x;e.readMode?n+=h:(n-=window.innerWidth/2*.25,n+=h,n/=.75),o.dataset.page&&v.push({left:n,page:o.dataset.page})}));var E=v.length?v[0].page:"";""===l.currentPage&&(l.currentPage=E);for(var P=!1,S=b.scrollLeft,w=1;w<=y;w++){var x=m;e.readMode||(x*=.75);var C=w*m;if(1===w||w>y-10)E="";else if(v.length&&v[0].left<C)for(E=v[0].page;v.length&&v[0].left<C;)P||l.currentPage!==v[0].page||(E===l.currentPage&&(P=!0),S=w*x-x),v.shift();g.push(E);var F=document.createElement("div");F.className="label";var L=document.createElement("p");if(L.innerText=""+E,F.appendChild(L),null==d||d.appendChild(F),(w-2)%s==0&&E){var M=document.createElement("div");M.className="scrollSnap",l.readMode?M.style.left=(w-1)*m+"px":M.style.left=.75*m*(w-1)+"px",null==u||u.appendChild(M)}}return t&&document.body.scrollTo(S,0),l.columnWidth=m,l.totalColumns=y,l.pagesPerColumn=g,l}}]);