!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";t.__esModule=!0;var n,r=o(1),l={currentFontSize:18,columnWidth:0,totalColumns:0,scrollFix:0,currentPage:"",pagesPerColumn:[],readMode:!0,animateEnabled:!0,invertViewerColor:!1,sepiaViewerColor:!1,lineHeight:1.5,verticalScroll:!1,currentFont:"baskerville-enc",verticalPageMarkers:[]},c=!1,d=function(){l=r.default(l,!0)},a=function(e){if(l.animateEnabled&&!l.verticalScroll){var t=l.columnWidth;l.readMode||(t*=.75);var o=Math.round((document.body.scrollLeft-l.scrollFix)/t);o<l.pagesPerColumn.length&&(l.currentPage=l.pagesPerColumn[o]),n&&(n.innerText=l.currentPage)}else if(l.animateEnabled){var r=(document.scrollingElement||document.body).scrollTop,c=l.verticalPageMarkers.find((function(e){return r<=e.top}));c&&(l.currentPage=c.page,n&&(n.innerText=l.currentPage))}else e.preventDefault()};window.addEventListener("touchmove",(function(e){(!l.animateEnabled||e.targetTouches.length>1)&&(e.preventDefault(),e.stopImmediatePropagation())}),{passive:!1}),window.addEventListener("touchstart",(function(e){e.targetTouches.length>1&&(e.preventDefault(),e.stopImmediatePropagation())}),{passive:!1});window.addEventListener("load",(function(){n=document.getElementById("pageNumber"),document.documentElement.style.setProperty("--fontSize",l.currentFontSize+"px");var e=document.body.querySelector("body > .zoomPanel"),t=document.body.querySelector("body > .buttons"),o=document.body.querySelector("body > .buttons > .fullScreenModeButton"),u=document.body.querySelector("body > .buttons > .increaseFontButton"),i=document.body.querySelector("body > .buttons > .decreaseFontButton"),s=document.body.querySelector("body > .buttons > .increaseLineHeight"),m=document.body.querySelector("body > .buttons > .decreaseLineHeight"),p=document.body.querySelector("body > .buttons > .nightModeButton"),y=document.body.querySelector("body > .buttons > .sepiaModeButton"),f=document.body.querySelector("body > .buttons > .verticalScrollButton"),v=function(){document.documentElement.style.setProperty("--fontSize",l.currentFontSize+"px"),document.documentElement.style.setProperty("--lineHeight",l.lineHeight+"em"),l=r.default(l,!0)};null==f||f.addEventListener("click",(function(o){if(o.preventDefault(),o.stopPropagation(),l.verticalScroll=!l.verticalScroll,document.body.className="viewer epub "+l.currentFont+(l.verticalScroll?" vertical":""),l.verticalScroll)document.documentElement.style.setProperty("--animationSpeed","0s"),document.documentElement.style.overflowY="auto",document.documentElement.style.overflowX="none",document.documentElement.scrollTo(0,0),document.body.scrollTo(0,0),setTimeout((function(){var e=document.body.querySelector('body > .zoomPanel > .chapterWrapper [data-page="'+l.currentPage+'"]');e&&document.documentElement.scrollTo(0,e.getBoundingClientRect().top),l=r.default(l,!0)}),0);else if(document.documentElement.scrollTo(0,0),document.body.scrollTo(0,0),document.documentElement.style.setProperty("--animationSpeed","0.5s"),document.documentElement.style.overflowY="hidden",document.documentElement.style.overflowX="hidden",(l=r.default(l,!0)).readMode=!0,e&&t){l.animateEnabled=!1,document.documentElement.style.setProperty("--viewerSnapType","none");var n=-1*document.body.scrollLeft/3;l.scrollFix=n,document.documentElement.style.setProperty("--horizontalScrollFix",l.scrollFix+"px"),c=!0,e.className="zoomPanel"+(l.readMode?" zoom":""),t.className="buttons"+(l.readMode?" zoom":"")}})),null==o||o.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen()})),null==p||p.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),c||(l.invertViewerColor=!l.invertViewerColor,document.documentElement.style.setProperty("--invertViewerColor",""+(l.invertViewerColor?1:0)))})),null==y||y.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),c||(l.sepiaViewerColor=!l.sepiaViewerColor,document.documentElement.style.setProperty("--sepiaViewerColor",""+(l.sepiaViewerColor?1:0)),document.documentElement.style.setProperty("--contrastViewerColor",""+(l.sepiaViewerColor?.6:1)))})),null==u||u.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.currentFontSize<32&&(l.currentFontSize+=2,v())})),null==i||i.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.currentFontSize>8&&(l.currentFontSize-=2,v())})),null==s||s.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.lineHeight<2&&(l.lineHeight+=.1,v())})),null==m||m.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),l.lineHeight>1&&(l.lineHeight-=.1,v())})),document.body.addEventListener("click",(function(o){if(o.preventDefault(),l.animateEnabled&&(l.readMode=!l.readMode,e&&t)){if(!l.verticalScroll){if(l.animateEnabled=!1,document.documentElement.style.setProperty("--viewerSnapType","none"),l.readMode){var n=-1*document.body.scrollLeft/3;l.scrollFix=n,document.documentElement.style.setProperty("--horizontalScrollFix",l.scrollFix+"px")}else{n=.25*document.body.scrollLeft;l.scrollFix=n,document.documentElement.style.setProperty("--horizontalScrollFix",l.scrollFix+"px")}c=!0,e.className="zoomPanel"+(l.readMode?" zoom":"")}t.className="buttons"+(l.readMode?" zoom":"")}})),document.body.addEventListener("scroll",a),document.addEventListener("scroll",a),document.fonts&&document.fonts.ready&&document.fonts.ready.then((function(){d()})),document.body.querySelectorAll("body > .buttons > .selectTypography").forEach((function(e){null==e||e.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),l.currentFont=e.value,document.body.className="viewer epub "+l.currentFont+(l.verticalScroll?" vertical":""),v()}))})),["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"].forEach((function(t){e.addEventListener(t,(function(){if(c){c=!1;var e=document.body.scrollLeft-l.scrollFix;document.body.scrollTo(e,0),l.scrollFix=0,document.documentElement.style.setProperty("--animationSpeed","0s"),document.documentElement.style.setProperty("--horizontalScrollFix",l.scrollFix+"px"),l=r.default(l,!1),window.requestAnimationFrame((function(){document.documentElement.style.setProperty("--animationSpeed","0.5s"),document.documentElement.style.setProperty("--viewerSnapType","x mandatory"),l.animateEnabled=!0,document.body.scrollTo(e,0)}))}}),!1)}))})),window.addEventListener("resize",d)},function(e,t,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};t.__esModule=!0;t.default=function(e,t){var o;void 0===t&&(t=!1);var r=n({},e),l=document.body.querySelector("body > .zoomPanel > .labelsForEveryPage"),c=document.body.querySelector("body > .pageSnaps");document.body.querySelectorAll("body > .zoomPanel >.labelsForEveryPage > .label").forEach((function(e){e.remove()})),document.body.querySelectorAll("body > .pageSnaps > .scrollSnap").forEach((function(e){e.remove()}));var d=window.innerWidth,a=window.innerHeight;document.documentElement.style.setProperty("--totalChapterWidth","0"),document.documentElement.style.setProperty("--vh",a+"px"),document.documentElement.style.setProperty("--windowWidth","0px"),document.documentElement.style.setProperty("--totalColumnWidth","0");var u=((null===(o=document.getElementById("totalColumnWidthCalculator"))||void 0===o?void 0:o.clientWidth)||1)+36,i=Math.floor(d/u),s=d/i,m=document.body.scrollWidth;e.readMode||(m-=window.innerWidth/2*.25);var p=m*(e.readMode?1:1/.75),y=Math.round(p/s);document.documentElement.style.setProperty("--totalColumnWidth",s+"px");var f=s*y,v=document.body;document.documentElement.style.setProperty("--totalChapterWidth",f+"px");var b=[],g=[],E=[],h=0;if(e.verticalScroll){var P=(document.scrollingElement||document.body).scrollTop;document.body.querySelectorAll("body > .zoomPanel > .chapterWrapper [data-page]").forEach((function(e){var t=e,o=t.getClientRects()[0].y;o+=P,E.push({top:o,page:t.dataset.page})}))}else{var S=document.body.scrollLeft;document.body.querySelectorAll("body > .zoomPanel > .chapterWrapper [data-page]").forEach((function(t){var o=t,n=o.getClientRects()[0].x;e.readMode?n+=S:(n-=window.innerWidth/2*.25,n+=S,n/=.75),o.dataset.page&&b.push({left:n,page:o.dataset.page})}));var w=b.length?b[0].page:"",x="";""===r.currentPage&&(r.currentPage=w);var F=!1;h=v.scrollLeft;for(var C=1;C<=y;C++){var M=s;e.readMode||(M*=.75);var z=C*s;if(1===C||C>y-1)w="";else if(b.length&&b[0].left<z)for(x=w=b[0].page;b.length&&b[0].left<z;){F||r.currentPage!==b[0].page||(w===r.currentPage&&(F=!0),h=C*M-M);var L=b.shift();L&&(x=L.page)}"-"===w&&(w=""),g.push(w);var T=document.createElement("div");T.className="label";var q=document.createElement("p");if(q.innerText=""+w,T.appendChild(q),null==l||l.appendChild(T),(C-2)%i==0&&w){var W=document.createElement("div");W.className="scrollSnap",r.readMode?W.style.left=(C-1)*s+"px":W.style.left=.75*s*(C-1)+"px",null==c||c.appendChild(W)}w=x}}return t&&document.body.scrollTo(h,0),r.columnWidth=s,r.totalColumns=y,r.pagesPerColumn=g,r.verticalPageMarkers=E,r}}]);